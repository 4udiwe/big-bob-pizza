# Gateway для Big Bob Pizza

Gateway — это **единая точка входа** для внутренних сервисов системы Big Bob Pizza:

* `order-service`
* `payment-service`
* `analytics-service`

## Назначение

Gateway принимает все входящие HTTP-запросы и проксирует их во внутренние сервисы, находящиеся в той же Docker-сети.

По умолчанию gateway:

* открывает **один порт** — `8080`;
* скрывает внутренние сервисы от прямого доступа извне.

## Маршрутизация

Поддерживаются следующие маршруты:

* `/orders` → `order-service` (internal)
* `/payments` → `payment-service` (internal)
* `/analytics` → `analytics-service` (internal)
* `/health` → endpoint проверки состояния gateway

## Design Notes

* Gateway реализован с использованием стандартных `net/http` reverse proxy.
* Все запросы проксируются к сервисам внутри одной Docker Compose сети.
* Для каждого входящего запроса ведётся информативное JSON-логирование:

  * HTTP-метод
  * путь запроса
  * удалённый адрес
  * HTTP-статус
  * время обработки запроса
* Аутентификация отсутствует (на данный момент) и может быть добавлена позже.
* Внутренние сервисы **не имеют проброшенных портов** в `docker-compose.yaml`, поэтому недоступны напрямую извне Compose-сети.

## Запуск

1. Собрать и запустить сервисы из корня репозитория:

```bash
docker compose up --build
```

2. После запуска gateway будет доступен по адресу:

```
http://localhost:8080
```

Порт можно переопределить через переменную окружения `GATEWAY_APP_PORT`.

## Внутреннее устройство (Internals)

* Gateway использует файл конфигурации `/config/config.yaml`, если он присутствует.
* Если файл конфигурации отсутствует, применяются значения по умолчанию с корректными адресами внутренних сервисов.
* Upstream-адреса сервисов задаются через имена контейнеров, например:

```
http://order-service:8080
```

Это обеспечивает маршрутизацию **исключительно внутри Docker Compose сети**.
